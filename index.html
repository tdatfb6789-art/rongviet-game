<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Tài Xỉu Đơn Giản</title>
<style>
  body { font-family: Arial, sans-serif; background: #fff8e7; color: #222; padding: 10px; max-width: 480px; margin: auto; }
  h1 { text-align: center; color: #d14723; }
  label, select, input, button { display: block; width: 100%; margin-top: 10px; font-size: 16px; }
  button { background: #d14723; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 5px; }
  button:hover { background: #b73a1a; }
  #dice-container { display: flex; justify-content: center; margin: 15px 0; }
  .dice {
    width: 60px; height: 60px; margin: 0 5px;
    background: white; border: 3px solid #d14723; border-radius: 10px;
    font-size: 36px; color: #d14723; text-align: center; line-height: 60px;
    user-select: none;
    animation: none;
  }
  .shake {
    animation: shake 0.6s ease-in-out;
  }
  @keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    20% { transform: rotate(20deg); }
    40% { transform: rotate(-20deg); }
    60% { transform: rotate(20deg); }
    80% { transform: rotate(-20deg); }
  }
  .result { font-weight: bold; font-size: 20px; text-align: center; margin-top: 15px; }
  .history, #withdraw-history {
    max-height: 150px; overflow-y: auto; background: #f4e7d6;
    padding: 10px; border-radius: 6px; margin-top: 15px; font-size: 14px;
  }
</style>
</head>
<body>
<h1>Game Tài Xỉu Đơn Giản</h1>

<div>Số dư ảo: <span id="balance">2,000,000,000</span> VNĐ</div>

<label for="game-mode">Chọn kiểu chơi:</label>
<select id="game-mode">
  <option value="basic">Tài Xỉu Cơ Bản</option>
  <option value="noh">Tài Xỉu Nổ Hũ</option>
  <option value="md5">Tài Xỉu MD5 (Minh Bạch)</option>
</select>

<label for="bet-amount">Nhập số tiền cược:</label>
<input type="number" id="bet-amount" min="1000" step="1000" value="1000000" />

<label for="bet-choice">Chọn Tài hoặc Xỉu:</label>
<select id="bet-choice">
  <option value="tai">Tài</option>
  <option value="xiu">Xỉu</option>
</select>

<button id="bet-btn">Đặt Cược</button>

<div id="dice-container">
  <div class="dice" id="dice1">?</div>
  <div class="dice" id="dice2">?</div>
  <div class="dice" id="dice3">?</div>
</div>

<div class="result" id="result"></div>

<h3>Lịch sử cược</h3>
<div class="history" id="history"></div>

<h3>Rút tiền thật</h3>
<label for="bank-select">Chọn ngân hàng:</label>
<select id="bank-select" required>
  <option>Vietcombank</option>
  <option>VietinBank</option>
  <option>Techcombank</option>
  <option>MB Bank</option>
  <option>TPBank</option>
  <option>ACB</option>
  <option>VPBank</option>
  <option>SHB</option>
  <option>BIDV</option>
  <option>Sacombank</option>
</select>

<label for="account-number">Nhập số tài khoản ngân hàng:</label>
<input type="text" id="account-number" placeholder="0123456789" required />

<label for="withdraw-amount">Số tiền rút:</label>
<input type="number" id="withdraw-amount" min="1000" step="1000" value="1000000" required />

<button id="withdraw-btn">Rút tiền</button>
<div id="withdraw-result" style="color: green; font-weight: bold; margin-top: 10px;"></div>

<h3>Lịch sử rút tiền</h3>
<div id="withdraw-history" class="history"></div>

<script>
  let balance = 2000000000;
  const balanceEl = document.getElementById('balance');
  const betAmountInput = document.getElementById('bet-amount');
  const betChoiceSelect = document.getElementById('bet-choice');
  const betBtn = document.getElementById('bet-btn');
  const resultEl = document.getElementById('result');
  const historyEl = document.getElementById('history');
  const bankSelect = document.getElementById('bank-select');
  const withdrawAmountInput = document.getElementById('withdraw-amount');
  const withdrawBtn = document.getElementById('withdraw-btn');
  const withdrawResultEl = document.getElementById('withdraw-result');
  const withdrawHistoryEl = document.getElementById('withdraw-history');
  const gameModeSelect = document.getElementById('game-mode');
  const diceEls = [document.getElementById('dice1'), document.getElementById('dice2'), document.getElementById('dice3')];
  const accountNumberInput = document.getElementById('account-number');

  const history = [];
  const withdrawHistory = [];

  function updateBalance(amount) {
    balance += amount;
    if (balance < 0) balance = 0;
    balanceEl.textContent = balance.toLocaleString('vi-VN');
  }

  function addHistory(entry) {
    history.unshift(entry);
    if (history.length > 20) history.pop();
    historyEl.innerHTML = history.map(h => `<div>${h}</div>`).join('');
  }

  function addWithdrawHistory(entry) {
    withdrawHistory.unshift(entry);
    if (withdrawHistory.length > 20) withdrawHistory.pop();
    withdrawHistoryEl.innerHTML = withdrawHistory.map(h => `<div>${h}</div>`).join('');
  }

  function rollDice() {
    return [
      Math.floor(Math.random() * 6) + 1,
      Math.floor(Math.random() * 6) + 1,
      Math.floor(Math.random() * 6) + 1
    ];
  }

  function getResult(sum) {
    return sum >= 11 ? 'tai' : 'xiu';
  }

  function fakeMD5(input) {
    let hash = 0;
    for(let i=0; i<input.length; i++) {
      hash = (hash << 5) - hash + input.charCodeAt(i);
      hash |= 0;
    }
    return Math.abs(hash).toString(16).padStart(32, '0');
  }

  function animateDice(callback) {
    diceEls.forEach(d => d.classList.add('shake'));
    setTimeout(() => {
      diceEls.forEach(d => d.classList.remove('shake'));
      callback();
    }, 600);
  }

  betBtn.onclick = () => {
    const betAmount = Number(betAmountInput.value);
    const betChoice = betChoiceSelect.value;
    const gameMode = gameModeSelect.value;

    if (betAmount <= 0) {
      alert('Vui lòng nhập số tiền cược hợp lệ!');
      return;
    }
    if (betAmount > balance) {
      alert('Số dư không đủ!');
      return;
    }

    animateDice(() => {
      const dice = rollDice();
      diceEls.forEach((d, i) => d.textContent = dice[i]);
      const sum = dice.reduce((a,b) => a+b, 0);
      let actualResult = getResult(sum);
      let winAmount = 0;
      let bonus = 0;

      if(gameMode === 'noh') {
        bonus = Math.floor(Math.random() * 3) + 1;
      } else if(gameMode === 'md5') {
        const hash = fakeMD5(dice.join(',') + Date.now());
        resultEl.textContent = `Kết quả MD5: ${hash}`;
      }

      if (betChoice === actualResult) {
        winAmount = betAmount * (1 + bonus);
        updateBalance(winAmount);
        resultEl.textContent = `Bạn thắng! Thắng ${winAmount.toLocaleString('vi-VN')} VNĐ (Bonus x${bonus})`;
      } else {
        updateBalance(-betAmount);
        resultEl.textContent = `Bạn thua! Mất ${betAmount.toLocaleString('vi-VN')} VNĐ`;
      }

      addHistory(`[${new Date().toLocaleTimeString()}] Cược ${betAmount.toLocaleString('vi-VN')} VNĐ - Chọn ${betChoice.toUpperCase()} - Kết quả: ${actualResult.toUpperCase()} - ${winAmount > 0 ? `Thắng ${winAmount.toLocaleString('vi-VN')}` : 'Thua'}`);
    });
  };

  withdrawBtn.onclick = () => {
    const withdrawAmount = Number(withdrawAmountInput.value);
    const bank = bankSelect.value;
    const accountNumber = accountNumberInput.value.trim();

    if (withdrawAmount <= 0) {
      alert('Vui lòng nhập số tiền rút hợp lệ!');
      return;
    }
    if (withdrawAmount > balance) {
      alert('Số dư không đủ để rút!');
      return;
    }
    if (accountNumber.length < 6 || !/^\d+$/.test(accountNumber)) {
      alert('Vui lòng nhập số tài khoản hợp lệ (ít nhất 6 số và chỉ gồm chữ số)!');
      return;
    }

    updateBalance(-withdrawAmount);
    withdrawResultEl.textContent = `Rút ${withdrawAmount.toLocaleString('vi-VN')} VNĐ thành công qua ngân hàng ${bank}, số tài khoản ${accountNumber}!`;

    const now = new Date();
    addWithdrawHistory(`${now.toLocaleString()} - Rút ${withdrawAmount.toLocaleString('vi-VN')} VNĐ qua ${bank} - Số TK: ${accountNumber}`);
  };
</script>
</body>
</html>
